"use strict";(self.webpackChunkgfdoc=self.webpackChunkgfdoc||[]).push([[20074],{755430:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027","title":"ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027","description":"Handler \u7279\u6027\u5141\u8bb8\u60a8\u8f7b\u677e\u5730\u590d\u7528\u5e38\u89c1\u7684\u903b\u8f91\u3002","source":"@site/versioned_docs/version-2.1.x/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027.md","sourceDirName":"\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9","slug":"/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027","permalink":"/2.1.x/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.1.x/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027.md","tags":[],"version":"2.1.x","lastUpdatedBy":"John","lastUpdatedAt":1730365530000,"sidebarPosition":14,"frontMatter":{"title":"ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027","sidebar_position":14,"hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"ORM\u94fe\u5f0f\u64cd\u4f5c-Hook\u7279\u6027","permalink":"/2.1.x/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-Hook\u7279\u6027"},"next":{"title":"ORM\u94fe\u5f0f\u64cd\u4f5c-\u60b2\u89c2\u9501 & \u4e50\u89c2\u9501","permalink":"/2.1.x/\u6838\u5fc3\u7ec4\u4ef6-\u91cd\u70b9/\u6570\u636e\u5e93ORM/ORM\u94fe\u5f0f\u64cd\u4f5c-\u91cd\u70b9/ORM\u94fe\u5f0f\u64cd\u4f5c-\u60b2\u89c2\u9501 & \u4e50\u89c2\u9501"}}');var a=t(474848),d=t(28453);const o={title:"ORM\u94fe\u5f0f\u64cd\u4f5c-Handler\u7279\u6027",sidebar_position:14,hide_title:!0},i=void 0,s={},c=[{value:"\u793a\u4f8b1\uff0c\u67e5\u8be2",id:"\u793a\u4f8b1\u67e5\u8be2",level:2},{value:"\u793a\u4f8b2\uff0c\u5206\u9875",id:"\u793a\u4f8b2\u5206\u9875",level:2}];function l(n){const e={code:"code",h2:"h2",p:"p",pre:"pre",...(0,d.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"Handler"})," \u7279\u6027\u5141\u8bb8\u60a8\u8f7b\u677e\u5730\u590d\u7528\u5e38\u89c1\u7684\u903b\u8f91\u3002"]}),"\n",(0,a.jsx)(e.h2,{id:"\u793a\u4f8b1\u67e5\u8be2",children:"\u793a\u4f8b1\uff0c\u67e5\u8be2"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'func AmountGreaterThan1000(m *gdb.Model) *gdb.Model {\n    return m.WhereGT("amount", 1000)\n}\n\nfunc PaidWithCreditCard(m *gdb.Model) *gdb.Model {\n    return m.Where("pay_mode_sign", "credit_card")\n}\n\nfunc PaidWithCod(m *gdb.Model) *gdb.Model {\n    return m.Where("pay_mode_sign", "cod")\n}\n\nfunc OrderStatus(statuses []string) func(m *gdb.Model) *gdb.Model {\n    return func(m *gdb.Model) *gdb.Model {\n        return m.Where("status", statuses)\n    }\n}\n\nvar (\n    m = g.Model("product_order")\n)\n\nm.Handler(AmountGreaterThan1000, PaidWithCreditCard).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `pay_mode_sign`=\'credit_card\'\n// \u67e5\u627e\u6240\u6709\u91d1\u989d\u5927\u4e8e 1000 \u7684\u4fe1\u7528\u5361\u8ba2\u5355\n\nm.Handler(AmountGreaterThan1000, PaidWithCod).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `pay_mode_sign`=\'cod\'\n// \u67e5\u627e\u6240\u6709\u91d1\u989d\u5927\u4e8e 1000 \u7684 COD \u8ba2\u5355\n\nm.Handler(AmountGreaterThan1000, OrderStatus([]string{"paid", "shipped"})).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `status` IN(\'paid\',\'shipped\')\n// \u67e5\u627e\u6240\u6709\u91d1\u989d\u5927\u4e8e1000 \u7684\u5df2\u4ed8\u6b3e\u6216\u5df2\u53d1\u8d27\u8ba2\u5355\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u793a\u4f8b2\u5206\u9875",children:"\u793a\u4f8b2\uff0c\u5206\u9875"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"func Paginate(r *ghttp.Request) func(m *gdb.Model) *gdb.Model {\n    return func(m *gdb.Model) *gdb.Model {\n        type Pagination struct {\n            Page int\n            Size int\n        }\n        var pagination Pagination\n        _ = r.Parse(&pagination)\n        switch {\n        case pagination.Size > 100:\n            pagination.Size = 100\n\n        case pagination.Size <= 0:\n            pagination.Size = 10\n        }\n        return m.Page(pagination.Page, pagination.Size)\n    }\n}\n\nm.Handler(Paginate(r)).Scan(&users)\nm.Handler(Paginate(r)).Scan(&articles)\n"})})]})}function u(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var r=t(296540);const a={},d=r.createContext(a);function o(n){const e=r.useContext(d);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),r.createElement(d.Provider,{value:e},n.children)}}}]);